[unix_http_server]
file=/var/run/supervisor.sock   ; (the path to the socket file)
chmod=0700                 ; socket file mode (default 0700)

[supervisord]
logfile=/var/log/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log)
logfile_maxbytes=50MB        ; (max main logfile bytes b4 rotation;default 50MB)
logfile_backups=10           ; (num of main logfile rotation backups;default 10)
loglevel=info                ; (log level;default info; others: debug,warn,trace)
pidfile=/var/run/supervisord.pid
nodaemon=false               ; (start in foreground if true;default false)
minfds=1024                  ; (min. avail startup file descriptors;default 1024)
minprocs=200                 ; (min. avail process descriptors;default 200)
umask=002                   ; (process file creation umask;default 022)
environment=LANG=en_US.UTF-8, LC_ALL=en_US.UTF-8, LC_LANG=en_US.UTF-8

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock ; use a unix:// URL  for a unix socket

[program:ajapaik_ee]
command=/opt/python27/bin/uwsgi
  --wsgi-file /var/garage/rephoto/project/ajapaik/wsgihandler.py
  --socket /var/garage/run/ajapaik_ee.sock
  --processes 5
  --master
  --max-requests 5000
  --logto /var/log/ajapaik.ee.uwsgi.log
  --chdir /var/garage/rephoto
  --env=LANG="en_US.utf8"
stderr_logfile=/var/log/ajapaik.ee.stderr
stdout_logfile=/var/log/ajapaik.ee.stdout
user=www-data
stopsignal=QUIT

[program:staging_ajapaik_ee]
command=/opt/python27/bin/uwsgi
  --socket /var/garage/run/staging_ajapaik_ee.sock
  --wsgi-file /var/garage/rephoto_staging/project/ajapaik/wsgihandler.py
  --processes 1
  --master
  --max-requests 1000
  --chdir /var/garage/rephoto_staging
  --logto /var/log/staging.ajapaik.ee.uwsgi.log
stderr_logfile=/var/log/staging.ajapaik.ee.stderr
stdout_logfile=/var/log/staging.ajapaik.ee.stdout
user=www-data
stopsignal=QUIT

[program:sift_pics]
command=/opt/python27/bin/uwsgi
  --wsgi-file /var/garage/sift/project/sift/wsgihandler.py
  --socket /var/garage/run/sift_pics.sock
  --processes 2
  --master
  --max-requests 2000
  --logto /var/log/sift.pics.uwsgi.log
  --chdir /var/garage/sift
  --env=LANG="en_US.utf8"
stderr_logfile=/var/log/sift.pics.stderr
stdout_logfile=/var/log/sift.pics.stdout
user=www-data
stopsignal=QUIT

[program:valimimoodul]
command=sh /home/valimimoodul/ajapaik/ajapaik-parent/run.sh
user=valimimoodul
stdout_logfile=/var/log/valimimoodul.stdout
stderr_logfile=/var/log/valimimoodul.stderr
stopsignal=QUIT
stopasgroup=true

[program:solr]
directory=/var/garage/solr-4.10.4/example
command=java -jar start.jar -Djetty.host=127.0.0.1
user=www-data
