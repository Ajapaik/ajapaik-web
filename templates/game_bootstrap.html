{% extends "base_bootstrap.html" %}
{% load i18n %}

{% block header %}
    {% include "header_city_selection_scoreboard_bootstrap.html" %}
{% endblock %}

{% block layout %}
    <div id="ajapaik-game-user-message-container">
        <div id="ajapaik-game-user-seen-all-message">
            <p>{% trans "You have seen all the pictures we have for this area." %}</p>
        </div>
        <div id="ajapaik-game-nothing-more-to-show-message">
            <p>{% trans "We are now showing you random photos." %}</p>
        </div>
    </div>
    <div class="modal fade" id="ajapaik-game-photo-modal" tabindex="-1" role="dialog" aria-labelledby="ajapaik-game-photo-modal-label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div id="ajapaik-game-modal-photo-container">
                        <img src="" class="img-responsive" id="ajapaik-game-modal-photo" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary ajapaik-game-specify-location-button">{% trans "Pick the shooting location!" %}</button>
                    <button class="btn btn-primary ajapaik-game-next-photo-button">{% trans "Next photo" %}</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="ajapaik-game-full-leaderboard-modal" tabindex="-1" role="dialog" aria-labelledby="ajapaik-game-full-leaderboard-modal-label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div id="leaderboard_browser">
                        <div class="single">
                            <div class="score_container">
                                <ul class="scoreboard" style="max-height:300px;overflow-y:auto;padding-right:10px;"></ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    {% comment %}<div id="notice" style="display: none;">
        <h2>{% trans "Thank you!" %}</h2>
        <p class="message"></p>
        <p class="points-gained-message"></p>
        <p class="geotag-count-message"></p>
        <p class="azimuth-count-message"></p>
        <p class="difficulty-message" style="margin: 0 0 5px;">
            {% trans "In your opinion to geotag this photo is" %}
        </p>
        <form id="difficulty-form">
            <span style="margin-right: 10px;">
                {% trans "easy" %}
            </span>
            <input type="radio" name="difficulty" value="1">
            <input style="margin-left: 5px;" type="radio" name="difficulty" value="2">
            <input style="margin-left: 5px;" type="radio" name="difficulty" value="3">
            <span style="margin-left: 10px;">
                {% trans "hard" %}
            </span>
        </form>
        <a id="continue-game" href="" class="btn small">{% trans "Next photo" %}</a>
    </div>{% endcomment %}
    <div id="ajapaik-game-map-container">
        <button class="btn btn-primary ajapaik-game-skip-photo-button">{% trans "Skip" %}</button>
        <button class="btn btn-primary ajapaik-game-save-location-button">{% trans "Save location only" %}</button>
        <div id="ajapaik-game-map-canvas"></div>
    </div>
    <img src="" class="img-responsive" id="ajapaik-game-guess-photo" />
    <script>
        var saveLocationURL = '{% url 'project.home.views.geotag_add' %}',
            leaderboardUpdateURL = '{% url 'project.home.views.leaderboard' %}',
            leaderboardFullURL = '{% url 'project.home.views.top50' %}',
            permalinkURL = '{{ hostname }}/foto/',
            cityId = '{{ filters.filters_by_name.city_lookup_filter.get_option_object.id }}',
            language_code = '{{ LANGUAGE_CODE }}';
        {% if filters.filters_by_name.city_lookup_filter.get_option_object %}
            start_location = [{{ filters.filters_by_name.city_lookup_filter.get_option_object.lon|safe }}, {{ filters.filters_by_name.city_lookup_filter.get_option_object.lat|safe }}];
        {% else %}
            start_location = [26, 59];
        {% endif %}
    </script>
    <script src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=visualization"></script>
    <script src="{{ STATIC_URL }}js/ajapaik-keyboard-control.min.js"></script>
    <script src="{{ STATIC_URL }}js/ajapaik-common.js"></script>
    <script src="{{ STATIC_URL }}js/init.js"></script>
    <script src="{{ STATIC_URL }}js/game.js"></script>
{% endblock %}

{% comment %}
        <div id="tools">
            <a id="save-location" href="#" class="btn medium">{% trans "Save location only" %}</a>
            <a id="close-location-tools" href="#" class="btn medium">{% trans "Close map" %}</a>
            <div id="map_canvas" style="width:100%; height:100%"></div>
        </div>
        <div id="photos"></div>
        <a id="skip-photo" href="#" class="skip-photo">{% trans "Next photo" %} &rarr;</a>
        <a id="back-home" href="/">&larr; {% trans "Back to home page" %}</a>
        <div id="btm">
            <div id="open-location-tools-container">
                <a id="open-location-tools" href="#" class="btn green">{% trans "Pick the shooting location!" %}</a>
            </div>
        </div>
        <div id="notice" style="display: none;">
            <h2>{% trans "Thank you!" %}</h2>
            <p class="message"></p>
            <p class="points-gained-message"></p>
            <p class="geotag-count-message"></p>
            <p class="azimuth-count-message"></p>
            <p class="difficulty-message" style="margin: 0 0 5px;">
                {% trans "In your opinion to geotag this photo is" %}
            </p>
            <form id="difficulty-form">
                <span style="margin-right: 10px;">
                    {% trans "easy" %}
                </span>
                <input type="radio" name="difficulty" value="1">
                <input style="margin-left: 5px;" type="radio" name="difficulty" value="2">
                <input style="margin-left: 5px;" type="radio" name="difficulty" value="3">
                <span style="margin-left: 10px;">
                    {% trans "hard" %}
                </span>
            </form>
            <a id="continue-game" href="" class="btn small">{% trans "Next photo" %}</a>
        </div>
        <div style="display: none;">
            <div id="leaderboard_browser">
                <div class="single">
                    <a style="position:absolute;top:5px;right:10px;" href="javascript:void(0);" onclick="$.modal.close();">
                        {% trans "Close" %}
                    </a>
                    <div class="score_container">
                        <ul class="scoreboard" style="max-height:300px;overflow-y:auto;padding-right:10px;"></ul>
                    </div>
                </div>
            </div>
        </div>
        <div id="full-photos"></div>
    </div>
    <script src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=visualization"></script>
    <script src="{{ STATIC_URL }}js/ajapaik-common.js"></script>
    <script src="{{ STATIC_URL }}js/init.js"></script>
    <script src="{{ STATIC_URL }}js/game.js"></script>
{% endblock %}{% endcomment %}
