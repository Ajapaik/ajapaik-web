{% load i18n %}

{% get_language_info for LANGUAGE_CODE as lang %}
<div id="ajapaik-language-box">
    <form action="/i18n/setlang/" method="post">
        {% csrf_token %}
        <div id="ajapaik-language-menu">
            <div>{{ lang.code|upper }}</div>
            <input name="next" type="hidden" value="{{ redirect_to }}"/>
            <select id="ajapaik-language-select" name="language" title="{% trans 'Select language' %}"
                    onchange="$(this.form).find('input[name=csrfmiddlewaretoken]').val(window.docCookies.getItem('csrftoken')); this.form.submit();">
                {% get_language_info_list for LANGUAGES as languages %}
                {% for language in languages %}
                    <option value="{{ language.code }}" title="{% trans language.name %} ({{ language.name_local }}) - {{ language.code|upper }}"
                            {% if language.code == lang.code %}
                                selected="selected"
                            {% endif %}>{{ language.name_local|title }}
                    </option>
                {% endfor %}
            </select>
        </div>
    </form>
</div>