{% load i18n ajapaik_templatetags %}

<nav role="navigation" class="navbar navbar-default navbar-fixed-top ajapaik-navbar{% if is_curator %}ajapaik-curator-navbar{% endif %}">
    <div class="container-fluid">
        <div class="navbar-header pull-left">
            <a class="navbar-brand ajapaik-brand hidden-xs hidden-sm" href="/" title="{% trans "Back to homepage" %}">
                {% trans "Timepatch (Ajapaik)" %}
            </a>
            <a class="navbar-brand ajapaik-brand ajapaik-brand-xs visible-xs visible-sm" href="/"
               title="{% trans "Back to homepage" %}">
                {% trans "Timepatch (Ajapaik)" %}
            </a>
        </div>
        <!-- 'Sticky' (non-collapsing) right-side menu item(s) -->
        <div class="navbar-header pull-right">
            <ul class="nav pull-left">
                <li class="pull-right">
                    <a role="button" href="#" title="{% trans 'Profile and leaderboard' %}"
                       id="ajapaik-header-profile-button" class="ajapaik-no-background">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24">
                            <path fill="#888" d="M19 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2zm-10 14h-2v-7h2v7zm4 0h-2v-10h2v10zm4 0h-2v-4h2v4z"/>
                            <path d="M0 0h24v24h-24z" fill="none"/>
                        </svg>
                    </a>
                    <div class="score_container">
                        <h4>
                            <a id="full_leaderboard" href="#">
                                {% trans "Leaderboard" %}
                            </a>
                        </h4>
                        <ul class="scoreboard">
                            {% if leaderboard %}
                                {% include "_block_leaderboard.html" %}
                            {% endif %}
                        </ul>
                        {% if request.user.is_authenticated and request.user.profile.fb_id or request.user.profile.google_plus_id %}
                            {% with profile=request.user.profile user=request.user %}
                                <div id="facebook-connected">
                                    <p>{% trans "User" %} <b>{{ user.get_full_name }}</b>.
                                        <a href='/logout' id='logout-button'>{% trans "Log out" %}</a>.
                                    </p>
                                </div>
                            {% endwith %}
                        {% else %}
                            <div id="facebook-connect">
                                <p>{% trans "Facebook Connect to save your score and continue later." %}</p>
                                <a href="/facebook/login" class="ir">{% trans "Connect with Facebook" %}</a>
                            </div>
                        {% endif %}
                    </div>
                </li>
            </ul>
            <!-- Required bootstrap placeholder for the collapsed menu -->
            <button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle">
                <span class="sr-only">{% trans "Toggle navigation" %}</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <!-- The Collapsing items            navbar-left or navbar-right -->
        <div class="collapse navbar-collapse navbar-left">
            <!--                      pull-right keeps the drop-down in line -->
            <ul class="nav navbar-nav pull-right">
                <li class="dropdown pull-left">
                    <a href="#" data-toggle="dropdown" class="dropdown-toggle ajapaik-no-background">
                        <span id="ajapaik-header-title">{% if album %}
                            {{ album.1 }}
                        {% else %}
                            {% trans "Albums" %}
                        {% endif %}</span><b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="/" title="Show albums">{% trans "Albums" %}</a>
                        </li>
                        <li>
                            <a href="#" id="ajapaik-frontpage-show-pictures-link" title="Show pictures">{% trans "Pictures" %} </a>
                        </li>
                    </ul>
                </li>
                {% if is_frontpage %}
                    {% include "_filtering_dropdown.html" %}
                {% endif %}
                <li class="pull-left">
                    <a role="button" title="{% trans 'Curate' %}" href="/curator">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path d="M0 0h24v24h-24z" fill="none"/>
                            <path fill="#888" {% if is_curator %}class="ajapaik-header-curate-button-white"{% endif %} d="M12 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm5 11h-4v4h-2v-4h-4v-2h4v-4h2v4h4v2z"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </div>

        <!-- Additional navbar items -->
        <div class="collapse navbar-collapse navbar-right">
            <!--                      pull-right keeps the drop-down in line -->
            <ul class="nav navbar-nav pull-right">
                <li class="pull-right">
                    <a role="button" title="{% trans 'About Ajapaik' %}" id="ajapaik-header-about-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path d="M0 0h24v24H0z" fill="none"/>
                            <path fill="#888" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </a>
                </li>
                <li class="pull-right">
                    <a href="{{ ajapaik_facebook_link }}" target="_blank" title="{% trans 'Ajapaik on Facebook' %}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="#888" d="M17,2V2H17V6H15C14.31,6 14,6.81 14,7.5V10H14L17,10V14H14V22H10V14H7V10H10V6A4,4 0 0,1 14,2H17Z" />
                        </svg>
                    </a>
                </li>
                <li class="dropdown pull-right">
                    {% get_language_info for LANGUAGE_CODE as lang %}
                    <a href="#" data-toggle="dropdown" class="dropdown-toggle ajapaik-no-background"
                            title="{% trans 'Choose language' %}">
                        {{ lang.code|upper }}
                    </a>
                    <ul class="dropdown-menu">
                        {% get_language_info_list for LANGUAGES as languages %}
                        {% for language in languages %}
                            <li>
                                <a href="#" class="ajapaik-change-language-link" data-lang-code="{{ language.code }}">
                                    {{ language.name_local|title }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>