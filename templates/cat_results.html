{% extends "base_bootstrap.html" %}

{% load compress i18n ajapaik_templatetags %}

{% block specific_css %}
    {% compress css %}
        <link rel="stylesheet" href="{{ STATIC_URL }}css/cat-style.css"/>
    {% endcompress %}
{% endblock %}

{% block header %}
    {% include "_cat_header.html" %}
{% endblock %}

{% block layout %}
    <div class="col-xs-3 col-lg-2">
        <ul class="nav nav-pills nav-stacked hidden" id="cat-filtering-panel">
            {% for k, v in tag_dict.items %}
                <li role="presentation">
                    <div class="container">
                        <div class="btn-group btn-group-justified col-xs-12" data-toggle="buttons">
                            <label class="btn btn-default {% if selected_tag_value_dict|access:k > 2 %}active{% endif %}">
                                <input class="cat-filtering-checkbox" type="checkbox" name="{{ k }}" value="-1" {% if selected_tag_value_dict|access:k > 2 %}checked="checked"{% endif %}>{{ v.left }}
                            </label>
                            <label class="btn btn-default {% if selected_tag_value_dict|access:k > 1 %}active{% endif %}">
                                <input class="cat-filtering-checkbox" type="checkbox" name="{{ k }}" value="0" {% if selected_tag_value_dict|access:k > 1 %}checked="checked"{% endif %}>{% trans "N/A" %}
                            </label>
                            <label class="btn btn-default {% if selected_tag_value_dict|access:k > 0 %}active{% endif %}">
                                <input class="cat-filtering-checkbox" type="checkbox" name="{{ k }}" value="1" {% if selected_tag_value_dict|access:k > 0 %}checked="checked"{% endif %}>{{ v.right }}
                            </label>
                        </div>
                    </div>
                </li>
            {% endfor %}
            <li role="presentation">
                <nav>
                    <ul class="pager">
                        <li class="previous">
                            <a id="cat-pager-previous" href="#">{% trans "Previous" %}</a>
                        </li>
                        <li class="disabled">
                            <a id="cat-pager-page" href="#">{{ page }}</a>
                        </li>
                        <li class="next">
                            <a id="cat-pager-next" href="#">{% trans "Next" %}</a>
                        </li>
                    </ul>
                </nav>
            </li>
        </ul>
    </div>
    <div class="col-xs-9 col-lg-10">
        <div class="col-xs-12" id="cat-album-selection">
            {% for a in albums %}
                <a href="" class="cat-album-selection-element" data-id="{{ a.pk }}" data-title="{{ a.title }}"
                   title="{{ a.title }}">
                    <img src="{% url 'project.home.cat.cat_album_thumb' a.pk 400 %}" alt="{{ a.title }}"
                         title="{{ a.title }}">
                    <div class="caption ajapaik-caption-album-selection">
                        <p title="{{ a.title }}">{{ a.title }}</p>
                        <p title="{{ a.subtitle }}">{{ a.subtitle }}</p>
                    </div>
                </a>
            {% endfor %}
        </div>
        <div class="col-xs-12 hidden" id="cat-photo-view"></div>
    </div>
    <div class="hidden">
        {% include "_cat_results_photo_js_template.html" %}
    </div>
{% endblock %}

{% block specific_js %}
    <script src="{{ STATIC_URL }}js/cat-results.js"></script>
    <script>
        var getPhotosURL = '{% url 'project.home.cat.cat_results' %}',
            photoThumbURL = '{% url 'project.home.cat.cat_photo' %}';
    </script>
    <script>
        $(document).ready(function () {
            var cat = new Cat();
            cat.initialize();
            cat.initializeState({{ state_json|safe }});
        });
    </script>
{% endblock %}