{% extends "base_bootstrap.html" %}
{% load i18n %}

{% block header %}
    {% include "header_city_selection_bootstrap.html" %}
{% endblock %}
{% block layout %}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/justifiedGallery.min.css" />
    <div id="photo-drawer"></div>
    <div class="container">
        <div class="row">
            <div class="col-xs-offset-3"></div>
            <div class="col-xs-12">
                <div id="gallery">
                    {% for photo in data %}
                        <a href="{{ photo.1 }}" class="ajapaik-grid-image-container">
                            <img alt="{{ photo.0 }}" src="" data-src="{{ photo.1 }}" width="{{ photo.2 }}" height="{{ photo.3 }}" class="ajapaik-grid-image lazyload" data-id="{{ photo.0 }}"/>
                        </a>
                    {% endfor %}
                </div>
                <div id="ajapaik-grid-load-more">
                    <a id="ajapaik-grid-load-more-link" href="javascript:void(0);">
                        {% trans "Load more photos" %}
                    </a>
                    <p id="ajapaik-grid-no-more-photos" style="display: none;">
                        {% trans "No more photos to show" %}
                    </p>
                </div>
            </div>
            <div class="col-xs-offset-3"></div>
        </div>
    </div>
    <div id="ajapaik-grid-map-container">
        <div class="panel panel-default" id="ajapaik-grid-map-info-panel">
            <div class="panel-body">
                {% trans "Geotags" %}: <span id="ajapaik-grid-map-geotag-count"></span>
                <br/>
                {% trans "With azimuth" %}: <span id="ajapaik-grid-map-geotag-with-azimuth-count"></span>
            </div>
        </div>
        <button class="btn btn-primary ajapaik-grid-save-location-button">{% trans "Save location only" %}</button>
        <button class="btn btn-primary ajapaik-grid-guess-location-button">{% trans "Guess location" %}</button>
        <button class="btn btn-primary ajapaik-grid-close-map-button">{% trans "Close map" %}</button>
        <div id="ajapaik-grid-map-canvas"></div>
    </div>
    <img src="" id="ajapaik-grid-guess-photo" />
    <img src="" id="ajapaik-grid-guess-photo-back" />
    <script src="{{ STATIC_URL }}js/jquery.justifiedGallery-3.4.0.min.js"></script>
    <script src="{{ STATIC_URL }}js/lazysizes-0.5.1.min.js"></script>
    <script>
        window.cityId = {{ city_id | safe }};
        window.start = {{ start | safe }};
        window.pageSize = {{ page_size | safe }};
        window.totalPhotoCount = {{ photo_count | safe }};
        window.saveLocationURL = '{% url 'project.home.views.geotag_add' %}';
    </script>
    <script src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=visualization"></script>
    <script src="{{ STATIC_URL }}js/ajapaik-common.js"></script>
    <script src="{{ STATIC_URL }}js/grid.js"></script>
{% endblock layout %}