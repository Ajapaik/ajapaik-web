{% extends "base_bootstrap.html" %}
{% load i18n %}

{% block header %}
    {% include "_header_city_selection_rephoto_scoreboard.html" %}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/justifiedGallery.min.css"/>
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}libs/jsPanel-bootstrap-1.4.0/source/jsPanel.css"/>
{% endblock %}
{% block layout %}
    <div id="photo-drawer"></div>
    <div id="ajapaik-mapview-map-container">
        <div id="ajapaik-mapview-map-canvas"></div>
    </div>
    <script src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=visualization"></script>
    <script src="{{ STATIC_URL }}js/markerclusterer-2.0.3.min.js"></script>
    <script src="{{ STATIC_URL }}js/ajapaik-common.js"></script>
    <script src="{{ STATIC_URL }}js/init.js"></script>
    <script>
        var leaderboardFullURL = "{% url "project.home.views.rephoto_top50" %}",
                userAlreadySeenPhotoIds = {{ user_seen_photo_ids | safe }},
                cityId = {{ city.id | safe }},
                initialize = function () {
                    if (window.getQueryParameterByName("fromSelect")) {
                        window.fromSelect = true;
                        History.replaceState(null, null, "/kaart/?city__pk=" + cityId);
                    } else {
                        window.fromSelect = false;
                    }
                    {% if city.lat and city.lon %}
                        window.getMap([{{ city.lon | safe }}, {{ city.lat | safe }}], 13);
                    {% else %}
                        window.getMap();
                    {% endif %}
                };

        $(document).ready(initialize);
    </script>
    <script src="{{ STATIC_URL }}libs/jsPanel-bootstrap-1.4.0/source/jquery.jspanel.bs-1.4.0.min.js"></script>
    <script src="{{ STATIC_URL }}js/lazysizes-0.5.1.min.js"></script>
    <script src="{{ STATIC_URL }}js/jquery.justifiedGallery-3.4.0.min.js"></script>
    <script src="{{ STATIC_URL }}js/browse.js"></script>
{% endblock %}
