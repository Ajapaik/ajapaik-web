{% extends "base.html" %}

{% load i18n compress cat_templatetags static %}

{% block header %}
    {% include "_cat_header.html" %}
{% endblock %}

{% block layout %}
    <div class="col-xs-5 col-sm-4 col-lg-3">
        <ul class="nav nav-pills nav-stacked hidden" id="cat-filtering-panel">
            {% for k, v in tag_dict.items %}
                <li role="presentation">
                    <div class="btn-group btn-group-justified" data-toggle="buttons">
                        <label class="btn btn-default cat-filtering-button {% if selected_tag_value_dict|get_item:k|get_item:"right" %}active{% endif %}">
                            <i class="material-icons">{{ v.left_icon }}</i>
                            <input class="cat-filtering-checkbox" type="checkbox" name="{{ k }}" value="-1" {% if selected_tag_value_dict|get_item:k|get_item:"right" %} checked="checked"{% endif %}>{% trans v.left %}
                        </label>
                        <label class="btn btn-default cat-filtering-button {% if selected_tag_value_dict|get_item:k|get_item:"na" %}active{% endif %}">
                            <input class="cat-filtering-checkbox" type="checkbox" name="{{ k }}" value="0" {% if selected_tag_value_dict|get_item:k|get_item:"na" %}checked="checked"{% endif %}>{% trans "N/A" %}
                        </label>
                        <label class="btn btn-default cat-filtering-button {% if selected_tag_value_dict|get_item:k|get_item:"left" %}active{% endif %}">
                            <i class="material-icons">{{ v.right_icon }}</i>
                            <input class="cat-filtering-checkbox" type="checkbox" name="{{ k }}" value="1" {% if selected_tag_value_dict|get_item:k|get_item:"left" %}checked="checked"{% endif %}>{% trans v.right %}
                        </label>
                    </div>
                </li>
            {% endfor %}
            <li role="presentation">
                <p class="text-center" id="cat-result-set-stats">{{ current_result_set_start }} - {{ current_result_set_end }} / {{ total_results }}</p>
            </li>
        </ul>
    </div>
    {% include "_cat_album_selection.html" %}
    <div class="col-xs-12 hidden" id="cat-pager">
        <nav>
            <ul class="pager">
                <li>
                    <a id="cat-pager-previous" href="#">{% trans "Previous" %}</a>
                </li>
                <li class="disabled">
                    <a id="cat-pager-page" href="#">{{ page }}</a>
                </li>
                <li>
                    <a id="cat-pager-next" href="#">{% trans "Next" %}</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="hidden">
        {% include "_cat_results_photo_js_template.html" %}
    </div>
{% endblock %}

{% block specific_js %}
    {% compress js %}
        <script src="{% static "js/cat-results.js" %}"></script>
        <script>
            var getPhotosURL = '{% url 'project.sift.views.cat_results' %}',
                photoThumbURL = '{% url 'project.sift.views.cat_photo' %}',
                taggerURL = '{% url 'project.sift.views.cat_tagger' %}';
        </script>
        <script>
            $(document).ready(function () {
                var cat = new Cat();
                cat.initialize();
                cat.initializeState({{ state_json|safe }});
            });
        </script>
    {% endcompress %}
{% endblock %}