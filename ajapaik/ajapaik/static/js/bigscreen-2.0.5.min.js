!function(e,i,l){"use strict";var n=/i(Pad|Phone|Pod)/.test(navigator.userAgent)&&7<=parseInt(navigator.userAgent.replace(/^.*OS (\d+)_(\d+).*$/,"$1.$2"),10),o=function(){var e=i.createElement("video"),n={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],exit:["exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]},t={};for(var r in n)for(var l=0,o=n[r].length;l<o;l++)if(n[r][l]in e||n[r][l]in i||"on"+n[r][l].toLowerCase()in i){t[r]=n[r][l];break}return t}();function u(e){var n=null;if("VIDEO"===e.tagName)n=e;else{var t=e.getElementsByTagName("video");t[0]&&(n=t[0])}return n}var r=null,a=null,c=function(){},s=[],d=!1;function m(n){var t=u(n);if(t&&t.webkitEnterFullscreen){try{t.readyState<t.HAVE_METADATA?(t.addEventListener("loadedmetadata",function e(){t.removeEventListener("loadedmetadata",e,!1),t.webkitEnterFullscreen(),a=!!t.getAttribute("controls")},!1),t.load()):(t.webkitEnterFullscreen(),a=!!t.getAttribute("controls")),r=t}catch(e){return E("not_supported",n)}return!0}return E(void 0===o.request?"not_supported":"not_enabled",n)}function t(){v.element||(g(),f())}function f(){l&&"webkitfullscreenchange"===o.change&&window.removeEventListener("resize",t,!1)}-1<navigator.userAgent.indexOf("Android")&&-1<navigator.userAgent.indexOf("Chrome")&&(d=parseInt(navigator.userAgent.replace(/^.*Chrome\/(\d+).*$/,"$1"),10)||!0);var b=function(e){var n=s[s.length-1];n&&(e!==n.element&&e!==r||!n.hasEntered)&&("VIDEO"===e.tagName&&(r=e),1===s.length&&v.onenter(v.element),n.enter.call(n.element,e||n.element),n.hasEntered=!0)},g=function(){!r||a||n||(r.setAttribute("controls","controls"),r.removeAttribute("controls")),a=r=null;var e=s.pop();e&&(e.exit.call(e.element),v.element||(s.forEach(function(e){e.exit.call(e.element)}),s=[],v.onexit()))},E=function(e,n){if(0<s.length){var t=s.pop();n=n||t.element,t.error.call(n,e),v.onerror(n,e)}},v={request:function(n,e,t,r){if(n=n||i.body,s.push({element:n,enter:e||c,exit:t||c,error:r||c}),void 0!==o.request)if(l&&!1===i[o.enabled])m(n);else if(!1!==d&&d<32)m(n);else{if(l&&void 0===o.enabled)return o.enabled="webkitFullscreenEnabled",n[o.request](),void setTimeout(function(){i[o.element]?i[o.enabled]=!0:(i[o.enabled]=!1,m(n))},250);try{n[o.request](),setTimeout(function(){i[o.element]||E(l?"not_enabled":"not_allowed",n)},100)}catch(e){E("not_enabled",n)}}else m(n)},exit:function(){f(),!0===i.fullscreen&&i[o.exit]()},toggle:function(e,n,t,r){v.element?v.exit():v.request(e,n,t,r)},videoEnabled:function(e){if(v.enabled)return!0;var n=u(e=e||i.body);return!(!n||void 0===n.webkitSupportsFullscreen)&&(n.readyState<n.HAVE_METADATA?"maybe":n.webkitSupportsFullscreen)},onenter:c,onexit:c,onchange:c,onerror:c};try{Object.defineProperties(v,{element:{enumerable:!0,get:function(){return r&&r.webkitDisplayingFullscreen?r:i[o.element]||null}},enabled:{enumerable:!0,get:function(){return"webkitCancelFullScreen"===o.exit&&!l||!(!1!==d&&d<32)&&(i[o.enabled]||!1)}}}),o.change&&i.addEventListener(o.change,function(e){if(v.onchange(v.element),v.element){var n=s[s.length-2];n&&n.element===v.element?g():(b(v.element),l&&"webkitfullscreenchange"===o.change&&window.addEventListener("resize",t,!1))}else g()},!1),i.addEventListener("webkitbeginfullscreen",function(e){var n=!0;if(0<s.length)for(var t=0,r=s.length;t<r;t++){if(u(s[t].element)===e.srcElement){n=!1;break}}n&&s.push({element:e.srcElement,enter:c,exit:c,error:c}),v.onchange(e.srcElement),b(e.srcElement)},!0),i.addEventListener("webkitendfullscreen",function(e){v.onchange(e.srcElement),g(e.srcElement)},!0),o.error&&i.addEventListener(o.error,function(e){E("not_allowed")},!1)}catch(e){v.element=null,v.enabled=!1}"function"==typeof define&&define.amd?define(function(){return v}):"undefined"!=typeof module&&module.exports?module.exports=v:e.BigScreen=v}(this,document,self!==top);