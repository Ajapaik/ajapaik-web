!function(t){"use strict";var p=function(t,n,e){var r,o,i=document.createElement("img");if(i.onerror=n,i.onload=function(){!o||e&&e.noRevoke||p.revokeObjectURL(o),n&&n(p.scale(i,e))},p.isInstanceOf("Blob",t)||p.isInstanceOf("File",t))r=o=p.createObjectURL(t),i._type=t.type;else{if("string"!=typeof t)return!1;r=t,e&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin)}return r?(i.src=r,i):p.readFile(t,function(t){var e=t.target;e&&e.result?i.src=e.result:n&&n(t)})},e=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;p.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},p.transformCoordinates=function(){},p.getTransformedOptions=function(t,e){var n,r,o,i,a=e.aspectRatio;if(!a)return e;for(r in n={},e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.crop=!0,o=t.naturalWidth||t.width,i=t.naturalHeight||t.height,n.maxHeight=a<o/i?(n.maxWidth=i*a,i):(n.maxWidth=o)/a,n},p.renderImageToCanvas=function(t,e,n,r,o,i,a,c,d,s){return t.getContext("2d").drawImage(e,n,r,o,i,a,c,d,s),t},p.hasCanvasOption=function(t){return t.canvas||t.crop||t.aspectRatio},p.scale=function(t,e){e=e||{};var n,r,o,i,a,c,d,s,u,f=document.createElement("canvas"),h=t.getContext||p.hasCanvasOption(e)&&f.getContext,g=t.naturalWidth||t.width,v=t.naturalHeight||t.height,m=g,l=v,w=function(){var t=Math.max((o||m)/m,(i||l)/l);1<t&&(m*=t,l*=t)},O=function(){var t=Math.min((n||m)/m,(r||l)/l);t<1&&(m*=t,l*=t)};return h&&(d=(e=p.getTransformedOptions(t,e)).left||0,s=e.top||0,e.sourceWidth?(a=e.sourceWidth,void 0!==e.right&&void 0===e.left&&(d=g-a-e.right)):a=g-d-(e.right||0),e.sourceHeight?(c=e.sourceHeight,void 0!==e.bottom&&void 0===e.top&&(s=v-c-e.bottom)):c=v-s-(e.bottom||0),m=a,l=c),n=e.maxWidth,r=e.maxHeight,o=e.minWidth,i=e.minHeight,h&&n&&r&&e.crop?(u=a/c-(m=n)/(l=r))<0?(c=r*a/n,void 0===e.top&&void 0===e.bottom&&(s=(v-c)/2)):0<u&&(a=n*c/r,void 0===e.left&&void 0===e.right&&(d=(g-a)/2)):((e.contain||e.cover)&&(o=n=n||o,i=r=r||i),e.cover?(O(),w()):(w(),O())),h?(f.width=m,f.height=l,p.transformCoordinates(f,e),p.renderImageToCanvas(f,t,d,s,a,c,0,0,m,l)):(t.width=m,t.height=l,t)},p.createObjectURL=function(t){return!!e&&e.createObjectURL(t)},p.revokeObjectURL=function(t){return!!e&&e.revokeObjectURL(t)},p.readFile=function(t,e,n){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=e,r[n=n||"readAsDataURL"])return r[n](t),r}return!1},"function"==typeof define&&define.amd?define(function(){return p}):t.loadImage=p}(window);