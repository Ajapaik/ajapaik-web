!function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(m){"use strict";var e=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);m.blobSlice=e&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},m.metaDataParsers={jpeg:{65505:[]}},m.parseMetaData=function(e,g,d){var f=this,t=(d=d||{}).maxMetaDataSize||262144,b={};!!(window.DataView&&e&&12<=e.size&&"image/jpeg"===e.type&&m.blobSlice)&&m.readFile(m.blobSlice.call(e,0,t),function(e){if(e.target.error)return console.log(e.target.error),void g(b);var t,i,a,o,r=e.target.result,l=new DataView(r),n=2,s=l.byteLength-4,c=n;if(65496===l.getUint16(0)){for(;n<s&&(65504<=(t=l.getUint16(n))&&t<=65519||65534===t);){if(n+(i=l.getUint16(n+2)+2)>l.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(a=m.metaDataParsers.jpeg[t])for(o=0;o<a.length;o+=1)a[o].call(f,l,n,i,b,d);c=n+=i}!d.disableImageHead&&6<c&&(r.slice?b.imageHead=r.slice(0,c):b.imageHead=new Uint8Array(r).subarray(0,c))}else console.log("Invalid JPEG file: Missing JPEG marker.");g(b)},"readAsArrayBuffer")||g(b)}});